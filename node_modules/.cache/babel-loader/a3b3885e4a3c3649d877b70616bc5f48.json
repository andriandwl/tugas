{"ast":null,"code":"const BASE_URL = \"\thttp://puntenkangnitipheulanepiakhirnovemberwenya.greenscreative.com/api\";\n\nfunction getAccessToken() {\n  return localStorage.getItem(\"accessToken\");\n}\n\nfunction putAccessToken(accessToken) {\n  return localStorage.setItem(\"accessToken\", accessToken);\n}\n\nasync function fetchWithToken(url) {\n  let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return fetch(url, { ...options,\n    headers: { ...options.headers,\n      Authorization: `Bearer ${getAccessToken()}`\n    }\n  });\n}\n\nasync function login(_ref) {\n  let {\n    username,\n    password\n  } = _ref;\n  const response = await fetch(`${BASE_URL}/login`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      username,\n      password\n    })\n  });\n  const responseJson = await response.json();\n\n  if (responseJson.status !== \"success\") {\n    alert(responseJson.message);\n    return {\n      meta: true,\n      data: null\n    };\n  }\n\n  return {\n    meta: false,\n    data: responseJson.data\n  };\n}\n\nasync function register(_ref2) {\n  let {\n    name,\n    email,\n    username,\n    password\n  } = _ref2;\n  const response = await fetch(`${BASE_URL}/register`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      name,\n      email,\n      username,\n      password\n    })\n  });\n  const responseJson = await response.json();\n\n  if (responseJson.status !== \"success\") {\n    alert(responseJson.message);\n    return {\n      meta: true\n    };\n  }\n\n  return {\n    meta: false\n  };\n}\n\nasync function getUserLogged() {\n  const response = await fetchWithToken(`${BASE_URL}/users/me`);\n  const responseJson = await response.json();\n\n  if (responseJson.status !== \"success\") {\n    return {\n      error: true,\n      data: null\n    };\n  }\n\n  return {\n    error: false,\n    data: responseJson.data\n  };\n}\n\nexport { getUserLogged, login, register, putAccessToken, fetchWithToken, getAccessToken };","map":{"version":3,"names":["BASE_URL","getAccessToken","localStorage","getItem","putAccessToken","accessToken","setItem","fetchWithToken","url","options","fetch","headers","Authorization","login","username","password","response","method","body","JSON","stringify","responseJson","json","status","alert","message","meta","data","register","name","email","getUserLogged","error"],"sources":["D:/React/project/nyobian/src/utils/api.jsx"],"sourcesContent":["const BASE_URL =\r\n  \"\thttp://puntenkangnitipheulanepiakhirnovemberwenya.greenscreative.com/api\";\r\n\r\nfunction getAccessToken() {\r\n  return localStorage.getItem(\"accessToken\");\r\n}\r\n\r\nfunction putAccessToken(accessToken) {\r\n  return localStorage.setItem(\"accessToken\", accessToken);\r\n}\r\n\r\nasync function fetchWithToken(url, options = {}) {\r\n  return fetch(url, {\r\n    ...options,\r\n    headers: {\r\n      ...options.headers,\r\n      Authorization: `Bearer ${getAccessToken()}`,\r\n    },\r\n  });\r\n}\r\nasync function login({ username, password }) {\r\n  const response = await fetch(`${BASE_URL}/login`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ username, password }),\r\n  });\r\n\r\n  const responseJson = await response.json();\r\n\r\n  if (responseJson.status !== \"success\") {\r\n    alert(responseJson.message);\r\n    return { meta: true, data: null };\r\n  }\r\n\r\n  return { meta: false, data: responseJson.data };\r\n}\r\n\r\nasync function register({ name, email, username, password }) {\r\n  const response = await fetch(`${BASE_URL}/register`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n    },\r\n    body: JSON.stringify({ name, email, username, password }),\r\n  });\r\n\r\n  const responseJson = await response.json();\r\n\r\n  if (responseJson.status !== \"success\") {\r\n    alert(responseJson.message);\r\n    return { meta: true };\r\n  }\r\n\r\n  return { meta: false };\r\n}\r\nasync function getUserLogged() {\r\n  const response = await fetchWithToken(`${BASE_URL}/users/me`);\r\n  const responseJson = await response.json();\r\n\r\n  if (responseJson.status !== \"success\") {\r\n    return { error: true, data: null };\r\n  }\r\n\r\n  return { error: false, data: responseJson.data };\r\n}\r\n\r\nexport {\r\n  getUserLogged,\r\n  login,\r\n  register,\r\n  putAccessToken,\r\n  fetchWithToken,\r\n  getAccessToken,\r\n};\r\n"],"mappings":"AAAA,MAAMA,QAAQ,GACZ,2EADF;;AAGA,SAASC,cAAT,GAA0B;EACxB,OAAOC,YAAY,CAACC,OAAb,CAAqB,aAArB,CAAP;AACD;;AAED,SAASC,cAAT,CAAwBC,WAAxB,EAAqC;EACnC,OAAOH,YAAY,CAACI,OAAb,CAAqB,aAArB,EAAoCD,WAApC,CAAP;AACD;;AAED,eAAeE,cAAf,CAA8BC,GAA9B,EAAiD;EAAA,IAAdC,OAAc,uEAAJ,EAAI;EAC/C,OAAOC,KAAK,CAACF,GAAD,EAAM,EAChB,GAAGC,OADa;IAEhBE,OAAO,EAAE,EACP,GAAGF,OAAO,CAACE,OADJ;MAEPC,aAAa,EAAG,UAASX,cAAc,EAAG;IAFnC;EAFO,CAAN,CAAZ;AAOD;;AACD,eAAeY,KAAf,OAA6C;EAAA,IAAxB;IAAEC,QAAF;IAAYC;EAAZ,CAAwB;EAC3C,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAAE,GAAEV,QAAS,QAAb,EAAsB;IAChDiB,MAAM,EAAE,MADwC;IAEhDN,OAAO,EAAE;MACP,gBAAgB;IADT,CAFuC;IAKhDO,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAEN,QAAF;MAAYC;IAAZ,CAAf;EAL0C,CAAtB,CAA5B;EAQA,MAAMM,YAAY,GAAG,MAAML,QAAQ,CAACM,IAAT,EAA3B;;EAEA,IAAID,YAAY,CAACE,MAAb,KAAwB,SAA5B,EAAuC;IACrCC,KAAK,CAACH,YAAY,CAACI,OAAd,CAAL;IACA,OAAO;MAAEC,IAAI,EAAE,IAAR;MAAcC,IAAI,EAAE;IAApB,CAAP;EACD;;EAED,OAAO;IAAED,IAAI,EAAE,KAAR;IAAeC,IAAI,EAAEN,YAAY,CAACM;EAAlC,CAAP;AACD;;AAED,eAAeC,QAAf,QAA6D;EAAA,IAArC;IAAEC,IAAF;IAAQC,KAAR;IAAehB,QAAf;IAAyBC;EAAzB,CAAqC;EAC3D,MAAMC,QAAQ,GAAG,MAAMN,KAAK,CAAE,GAAEV,QAAS,WAAb,EAAyB;IACnDiB,MAAM,EAAE,MAD2C;IAEnDN,OAAO,EAAE;MACP,gBAAgB;IADT,CAF0C;IAKnDO,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;MAAES,IAAF;MAAQC,KAAR;MAAehB,QAAf;MAAyBC;IAAzB,CAAf;EAL6C,CAAzB,CAA5B;EAQA,MAAMM,YAAY,GAAG,MAAML,QAAQ,CAACM,IAAT,EAA3B;;EAEA,IAAID,YAAY,CAACE,MAAb,KAAwB,SAA5B,EAAuC;IACrCC,KAAK,CAACH,YAAY,CAACI,OAAd,CAAL;IACA,OAAO;MAAEC,IAAI,EAAE;IAAR,CAAP;EACD;;EAED,OAAO;IAAEA,IAAI,EAAE;EAAR,CAAP;AACD;;AACD,eAAeK,aAAf,GAA+B;EAC7B,MAAMf,QAAQ,GAAG,MAAMT,cAAc,CAAE,GAAEP,QAAS,WAAb,CAArC;EACA,MAAMqB,YAAY,GAAG,MAAML,QAAQ,CAACM,IAAT,EAA3B;;EAEA,IAAID,YAAY,CAACE,MAAb,KAAwB,SAA5B,EAAuC;IACrC,OAAO;MAAES,KAAK,EAAE,IAAT;MAAeL,IAAI,EAAE;IAArB,CAAP;EACD;;EAED,OAAO;IAAEK,KAAK,EAAE,KAAT;IAAgBL,IAAI,EAAEN,YAAY,CAACM;EAAnC,CAAP;AACD;;AAED,SACEI,aADF,EAEElB,KAFF,EAGEe,QAHF,EAIExB,cAJF,EAKEG,cALF,EAMEN,cANF"},"metadata":{},"sourceType":"module"}